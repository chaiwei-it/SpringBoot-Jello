define("page/login/login",["require","exports","module","components/app/app","components/app/api"],function(e){var s=e("components/app/app"),a=e("components/app/api");$().ready(function(){$("#doc-vld-msg").validate({rules:{username:{required:!0,minlength:2},password:{required:!0}},messages:{username:{required:"用户名不能为空哦",minlength:"用户名不能太短哦"},password:{required:"密码不能为空哦"}}})}),$("#login").click(function(){if($("#doc-vld-msg").valid()){$("#login").attr("disabled","true"),$("#login").val("登录中...");var e=a.login,r={username:$("#username").val(),password:$("#password").val(),grant_type:"password"},o=function(e){if($("#login").removeAttr("disabled"),$("#login").val("登录"),200==e.code)s.sets("user",e.data[0]),s.message("登录成功","success"),setTimeout(function(){history.back()},1300);else{if(20003!=e.code)return s.message(e.message,"error"),!1;s.message(e.message,"error")}};s.ajax(e,"post",r,o)}})});