define("page/login/login",["require","exports","module","components/app/app","components/app/api"],function(a){var e=a("components/app/app"),o=a("components/app/api");$(function(){$("#doc-vld-msg").validator({onValid:function(a){$(a.field).closest(".am-form-group").find(".am-alert").hide()},onInValid:function(a){var e=$(a.field),o=e.closest(".am-form-group"),n=o.find(".am-alert"),s=e.data("validationMessage")||this.getValidationMessage(a);n.length||(n=$('<div class="am-alert am-alert-danger"></div>').hide().appendTo(o)),n.html(s).show()}})}),$("#login").click(function(){$("#login").attr("disabled","true"),$("#login").val("登录中...");var a=o.login,n={username:$("#username").val(),password:$("#password").val(),grant_type:"password"},s=function(a){return $("#login").removeAttr("disabled"),$("#login").val("登录"),200!==a.code?(e.message(a.msg,"error"),!1):(e.sets("user",a.data),void e.message("登录成功","success"))};e.ajax(a,"post",n,s)})});