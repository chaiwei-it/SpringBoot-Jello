define("components/js/fileup",["require","exports","module","components/app/app","components/app/api"],function(n,a,i){var e=n("components/app/app"),t=n("components/app/api"),o=function(n,a){var i=t.filesUpload,o=function(a,i){var e=new FileReader;e.onload=function(){var a=e.result.split(",")[1],t="data:image/png;base64,"+a;i.attr("src",t),i.show(),i.prev(".al-showX").show(),i.parents(".al-img").removeClass("al-new");var o=n.find(".al-new").length;o||s()},e.readAsDataURL(a)},p=function(){n.find("input").unbind("change"),n.find("input").on("change",function(){var n=$(this)[0].files[0],a=$(this).parents(".al-img"),t=a.find(".al-showImg");o(n,t);var p=function(n){a.attr("data-src",n)},s=function(){e.message("网络状态差， 请稍后重试。","danger")};e.uploadImg(i,n,p,s)}),n.find(".al-showX").unbind("click"),n.find(".al-showX").on("click",function(a){$(this).parents(".al-img").remove();var i=n.find(".al-img").length;i||s(),a.preventDefault()})},s=function(){var i=n.find(".al-img").length;if(a>i){var t=e.loadHtml('<div class="al-img al-imgUp al-new">\n  <div class="al-showX"><i></i></div>\n  <img class="al-showImg" src="">\n  <form method="post" enctype="multipart/form-data">\n    <input type="file" accept="image/jpg,image/jpeg,image/png,image/gif" name="images">\n  </form>\n</div>\n');n.append(t())}p()};s()};i.exports=o});